<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title></title>
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <meta name="author" content="" />
    <link
      rel="shortcut icon"
      href="/blog/img/authors/favicon.ico"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="/blog/css/normalize.css"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="/blog/fonts/font-awesome/css/font-awesome.css"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="/blog/css/modern-blog.css"
    />
    <!--[if IE]>
      <script type="text/javascript" src="js/vendors/html5.min.js"></script>
    <![endif]-->
    <script>
      if (navigator.userAgent.toLowerCase().indexOf("firefox") > -1) {
        var root = document.getElementsByTagName("html")[0];
        root.setAttribute("class", "ff");
      }
    </script>
  </head>
  <body class="body">
    <div class="container">
  <header class="header">
    <a href="/blog/" class="athi"
      ><h1>아띠<span>A Clean, Fresh Minimal Look.</span></h1></a
    >
    <nav class="links">
      <a href="#"><i class="fa fa-twitter-square fa-3x"></i></a>
      <a href="#"><i class="fa fa-instagram fa-3x"></i></a>
      <a href="#"><i class="fa fa-facebook-square fa-3x"></i></a>
      <a href="#"><i class="fa fa-tumblr-square fa-3x"></i></a>
    </nav>
    <!-- 
  
  
  
<br />

<span>test1|test2|test3|test4|test5|test6|test7|test8|test9|test10|</span><br />
<span>VScodeVScodeVScodebooksdockergithubgithubgoodwriting-seriesgoodwriting-seriesgoodwriting-seriesgoodwriting-seriesgoodwriting-seriesgoodwriting-seriesgoodwriting-seriesgoodwriting-seriesreact-nativereact-nativereact-nativereact-nativereact-nativereact-nativereact-nativetag2tag3test1test1test10test2test3test4test5test6test7test8test9</span>

<br />

<span>VScodebooksdockergithubgoodwriting-seriesreact-nativetag2tag3test1test10test2test3test4test5test6test7test8test9</span>

<br />
<span>
  [ 
   
  
   
  
  <a href="/tag/VScode"
    ><code class="highligher-rouge"
      ><nobr>VScode</nobr></code
    >&nbsp;</a
  >
  
   
  
  <a href="/tag/books"
    ><code class="highligher-rouge"
      ><nobr>books</nobr></code
    >&nbsp;</a
  >
  
   
  
  <a href="/tag/docker"
    ><code class="highligher-rouge"
      ><nobr>docker</nobr></code
    >&nbsp;</a
  >
  
   
  
  <a href="/tag/github"
    ><code class="highligher-rouge"
      ><nobr>github</nobr></code
    >&nbsp;</a
  >
  
   
  
  <a href="/tag/goodwriting-series"
    ><code class="highligher-rouge"
      ><nobr>goodwriting-series</nobr></code
    >&nbsp;</a
  >
  
   
  
  <a href="/tag/react-native"
    ><code class="highligher-rouge"
      ><nobr>react-native</nobr></code
    >&nbsp;</a
  >
  
   
  
  <a href="/tag/tag2"
    ><code class="highligher-rouge"
      ><nobr>tag2</nobr></code
    >&nbsp;</a
  >
  
   
  
  <a href="/tag/tag3"
    ><code class="highligher-rouge"
      ><nobr>tag3</nobr></code
    >&nbsp;</a
  >
  
   
  
  <a href="/tag/test1"
    ><code class="highligher-rouge"
      ><nobr>test1</nobr></code
    >&nbsp;</a
  >
  
   
  
  <a href="/tag/test10"
    ><code class="highligher-rouge"
      ><nobr>test10</nobr></code
    >&nbsp;</a
  >
  
   
  
  <a href="/tag/test2"
    ><code class="highligher-rouge"
      ><nobr>test2</nobr></code
    >&nbsp;</a
  >
  
   
  
  <a href="/tag/test3"
    ><code class="highligher-rouge"
      ><nobr>test3</nobr></code
    >&nbsp;</a
  >
  
   
  
  <a href="/tag/test4"
    ><code class="highligher-rouge"
      ><nobr>test4</nobr></code
    >&nbsp;</a
  >
  
   
  
  <a href="/tag/test5"
    ><code class="highligher-rouge"
      ><nobr>test5</nobr></code
    >&nbsp;</a
  >
  
   
  
  <a href="/tag/test6"
    ><code class="highligher-rouge"
      ><nobr>test6</nobr></code
    >&nbsp;</a
  >
  
   
  
  <a href="/tag/test7"
    ><code class="highligher-rouge"
      ><nobr>test7</nobr></code
    >&nbsp;</a
  >
  
   
  
  <a href="/tag/test8"
    ><code class="highligher-rouge"
      ><nobr>test8</nobr></code
    >&nbsp;</a
  >
  
   
  
  <a href="/tag/test9"
    ><code class="highligher-rouge"
      ><nobr>test9</nobr></code
    >&nbsp;</a
  >
  
   
  ]
</span>
<br /> -->





  


  

<div style="display: block; margin-left: auto; margin-right: auto; margin-top:30px; max-width: 500px; text-align: center;" class="tags">
<span >
   
  
   
  
  <a href="/blog/tag/VScode" class="VScodeTagLink"><code><nobr>VScode</nobr></code>&nbsp;</a>
  
   
  
  <a href="/blog/tag/books" class="booksTagLink"><code><nobr>books</nobr></code>&nbsp;</a>
  
   
  
  <a href="/blog/tag/docker" class="dockerTagLink"><code><nobr>docker</nobr></code>&nbsp;</a>
  
   
  
  <a href="/blog/tag/github" class="githubTagLink"><code><nobr>github</nobr></code>&nbsp;</a>
  
   
  
  <a href="/blog/tag/goodwriting-series" class="goodwriting-seriesTagLink"><code><nobr>goodwriting-series</nobr></code>&nbsp;</a>
  
   
  
  <a href="/blog/tag/react-native" class="react-nativeTagLink"><code><nobr>react-native</nobr></code>&nbsp;</a>
  
   
  
  <a href="/blog/tag/tag2" class="tag2TagLink"><code><nobr>tag2</nobr></code>&nbsp;</a>
  
   
  
  <a href="/blog/tag/tag3" class="tag3TagLink"><code><nobr>tag3</nobr></code>&nbsp;</a>
  
   
  
  <a href="/blog/tag/test1" class="test1TagLink"><code><nobr>test1</nobr></code>&nbsp;</a>
  
   
  
  <a href="/blog/tag/test10" class="test10TagLink"><code><nobr>test10</nobr></code>&nbsp;</a>
  
   
  
  <a href="/blog/tag/test2" class="test2TagLink"><code><nobr>test2</nobr></code>&nbsp;</a>
  
   
  
  <a href="/blog/tag/test3" class="test3TagLink"><code><nobr>test3</nobr></code>&nbsp;</a>
  
   
  
  <a href="/blog/tag/test4" class="test4TagLink"><code><nobr>test4</nobr></code>&nbsp;</a>
  
   
  
  <a href="/blog/tag/test5" class="test5TagLink"><code><nobr>test5</nobr></code>&nbsp;</a>
  
   
  
  <a href="/blog/tag/test6" class="test6TagLink"><code><nobr>test6</nobr></code>&nbsp;</a>
  
   
  
  <a href="/blog/tag/test7" class="test7TagLink"><code><nobr>test7</nobr></code>&nbsp;</a>
  
   
  
  <a href="/blog/tag/test8" class="test8TagLink"><code><nobr>test8</nobr></code>&nbsp;</a>
  
   
  
  <a href="/blog/tag/test9" class="test9TagLink"><code><nobr>test9</nobr></code>&nbsp;</a>
  
  
</span>
</div>
  </header>
  <div class="content">
    <!-- trianglify pattern container -->
    <div class="pattern pattern--hidden"></div>
    <!-- cards -->

    <div class="wrapper">
      
      <div class="card" data-id="/2019/06/04/auth-server">
        <div class="card__container card__container--closed">
          <svg
            class="card__image"
            xmlns="http://www.w3.org/2000/svg"
            xmlns:xlink="http://www.w3.org/1999/xlink"
            viewBox="0 0 1920 1200"
            preserveAspectRatio="xMidYMid slice"
          >
            <defs>
              <clipPath id="/2019/06/04/auth-server-clip-path">
                <polygon
                  class="clip"
                  points="0,1200 0,0 1920,0 1920,1200"
                ></polygon>
              </clipPath>
            </defs>
            <image
              clip-path="url(#/2019/06/04/auth-server-clip-path)"
              width="1920"
              height="1200"
              xlink:href="/blog/img/c.jpg"
            ></image>
          </svg>
          <div class="card__content">
            <i class="card__btn-close fa fa-times"></i>
            <div class="card__caption">
              <span class="card__title">서버 인증</span>
              <p class="card__subtitle">Auth Server</p>
            </div>
            <div class="card__copy">
              <div class="meta">
                <img
                  class="meta__avatar"
                  src="/blog/img/authors/athi.png"
                />
                <span class="meta__author">Athi</span>
                <span class="meta__date">2019-06-04</span>
              </div>
              <p><a href="https://medium.com/handlebar-labs/graphql-authentication-with-react-native-apollo-part-2-2-13ac8c362113">참고자료</a></p>

<h2 id="전체코드">전체코드</h2>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">makeExecutableSchema</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">graphql-tools</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">MongoClient</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">mongodb</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">TEMP_USER</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">_id</span><span class="p">:</span> <span class="dl">"</span><span class="s2">1</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">email</span><span class="p">:</span> <span class="dl">"</span><span class="s2">spencer@handlebarlabs.com</span><span class="dl">"</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">typeDefs</span> <span class="o">=</span> <span class="s2">`
  type User {
    _id: String
    email: String
  }
  type Query {
    currentUser: User
  }
  type Mutation {
    login(email: String!, password: String!): User
    signUp(email: String!, password: String!): User
  }
`</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">resolvers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">Query</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">currentUser</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">TEMP_USER</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="na">Mutation</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">login</span><span class="p">:</span> <span class="p">(</span><span class="nx">root</span><span class="p">,</span> <span class="p">{</span> <span class="nx">email</span><span class="p">,</span> <span class="nx">password</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">data</span><span class="dl">"</span><span class="p">,</span> <span class="nx">email</span><span class="p">,</span> <span class="nx">passwrod</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">TEMP_USER</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="na">signup</span><span class="p">:</span> <span class="p">(</span><span class="nx">root</span><span class="p">,</span> <span class="p">{</span> <span class="nx">email</span><span class="p">,</span> <span class="nx">password</span> <span class="p">},</span> <span class="p">{</span> <span class="nx">mongo</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">TEMP_USER</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="c1">// Required: Export the GraphQL.js schema object as "schema"</span>
<span class="k">export</span> <span class="kd">const</span> <span class="nx">schema</span> <span class="o">=</span> <span class="nx">makeExecutableSchema</span><span class="p">({</span>
  <span class="nx">typeDefs</span><span class="p">,</span>
  <span class="nx">resolvers</span>
<span class="p">});</span>

<span class="c1">// Optional: Export a function to get context from the request.</span>

<span class="kd">let</span> <span class="nx">mongo</span><span class="p">;</span>

<span class="k">export</span> <span class="k">async</span> <span class="kd">function</span> <span class="nx">context</span><span class="p">(</span><span class="nx">headers</span><span class="p">,</span> <span class="nx">secrets</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">mongo</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">mongo</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">MongoClient</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="nx">secrets</span><span class="p">.</span><span class="nx">MONGO_URL</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="p">{</span>
    <span class="nx">headers</span><span class="p">,</span>
    <span class="nx">secrets</span><span class="p">,</span>
    <span class="nx">mongo</span>
  <span class="p">};</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="connecting-to-thedatabase">Connecting to the Database</h2>

<p>Once you’ve set up your account with <a href="https://mlab.com">mLab</a> and created a new mongo db instance you should see a url along the lines of</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mongodb://&lt;dbuser&gt;:&lt;dbpassword&gt;@ds121665.mlab.com:21665/graphql-auth-demo-1
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// 나의경우
mongodb://shiftcard:1234@ds121665.mlab.com:21665/graphql-auth-demo-1
</code></pre></div></div>

<p><code class="highlighter-rouge">launchpad apollo의 key에 MONGO_URL, value값에 위의 값 추가함</code></p>

<p>you’ll also need to create a user for that database (with write permissions). Take that url and add it to our “secrets” as <code class="highlighter-rouge">MONGO_URL</code> in Launchpad. Make sure to swap out <code class="highlighter-rouge">&lt;dbuser&gt;</code> and <code class="highlighter-rouge">&lt;dbpassword&gt;</code> with the values of the user you created.</p>

<p>By adding the secret values here we can access them from our context function, which is where we’ll be establishing our mongo connection. This context function will be called each time a request is made to a GraphQL endpoint so we want to store a reference to our connection outside of the function (allowing us to only make the db connection request once). We’ll then return the mongo variable in context so that we access it in our resolver functions.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">mongo</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">client</span><span class="p">;</span>
<span class="k">export</span> <span class="k">async</span> <span class="kd">function</span> <span class="nx">context</span><span class="p">(</span><span class="nx">headers</span><span class="p">,</span> <span class="nx">secrets</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">mongo</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">client</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">MongoClient</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="nx">secrets</span><span class="p">.</span><span class="nx">MONGO_URL</span><span class="p">);</span>
    <span class="nx">mongo</span> <span class="o">=</span> <span class="nx">client</span><span class="p">.</span><span class="nx">db</span><span class="p">(</span><span class="dl">"</span><span class="s2">graphql-auth-demo-1</span><span class="dl">"</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="p">{</span>
    <span class="nx">headers</span><span class="p">,</span>
    <span class="nx">secrets</span><span class="p">,</span>
    <span class="nx">mongo</span>
  <span class="p">};</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Make sure you <code class="highlighter-rouge">import { MongoClient } from 'mongodb';</code> at the top of your file! Launchpad will automatically install it.</p>

<h2 id="sign-up">Sign Up</h2>

<p>Now let’s access the database from the resolver functions… first signup. We’ll get a reference to a <code class="highlighter-rouge">users</code> collection and then check if a user with the given email address already exists.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="kd">const</span> <span class="nx">resolvers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="p">...</span>
  <span class="na">Mutation</span><span class="p">:</span> <span class="p">{</span>
    <span class="p">...</span>
    <span class="na">signup</span><span class="p">:</span> <span class="k">async</span> <span class="p">(</span><span class="nx">root</span><span class="p">,</span> <span class="p">{</span> <span class="nx">email</span><span class="p">,</span> <span class="nx">password</span> <span class="p">},</span> <span class="p">{</span> <span class="nx">mongo</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">Users</span> <span class="o">=</span> <span class="nx">mongo</span><span class="p">.</span><span class="nx">collection</span><span class="p">(</span><span class="dl">'</span><span class="s1">users</span><span class="dl">'</span><span class="p">);</span>
      <span class="kd">const</span> <span class="nx">existingUser</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">Users</span><span class="p">.</span><span class="nx">findOne</span><span class="p">({</span> <span class="nx">email</span> <span class="p">});</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">existingUser</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Email already used</span><span class="dl">'</span><span class="p">);</span>
      <span class="p">}</span>

      <span class="c1">// TODO: Make this real</span>
      <span class="k">return</span> <span class="nx">TEMP_USER</span><span class="p">;</span>
    <span class="p">},</span>
  <span class="p">},</span>
<span class="p">};</span>
</code></pre></div></div>

<p>We can then insert the user document into the collection. I’ll be using <code class="highlighter-rouge">bcrypt</code> to hash the user’s password, because you should never store a plain text password in your database! Make sure you import the lib:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">bcrypt</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">bcrypt</span><span class="dl">"</span><span class="p">;</span>
</code></pre></div></div>

<p>I’m going to be using async/await because it makes for easy to follow code.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">resolvers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="p">...</span>
  <span class="na">Mutation</span><span class="p">:</span> <span class="p">{</span>
    <span class="p">...</span>
    <span class="na">signup</span><span class="p">:</span> <span class="k">async</span> <span class="p">(</span><span class="nx">root</span><span class="p">,</span> <span class="p">{</span> <span class="nx">email</span><span class="p">,</span> <span class="nx">password</span> <span class="p">},</span> <span class="p">{</span> <span class="nx">mongo</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">Users</span> <span class="o">=</span> <span class="nx">mongo</span><span class="p">.</span><span class="nx">collection</span><span class="p">(</span><span class="dl">'</span><span class="s1">users</span><span class="dl">'</span><span class="p">);</span>
      <span class="kd">const</span> <span class="nx">existingUser</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">Users</span><span class="p">.</span><span class="nx">findOne</span><span class="p">({</span> <span class="nx">email</span> <span class="p">});</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">existingUser</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Email already used</span><span class="dl">'</span><span class="p">);</span>
      <span class="p">}</span>

      <span class="kd">const</span> <span class="nx">hash</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">bcrypt</span><span class="p">.</span><span class="nx">hash</span><span class="p">(</span><span class="nx">password</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>
      <span class="k">await</span> <span class="nx">Users</span><span class="p">.</span><span class="nx">insert</span><span class="p">({</span>
        <span class="nx">email</span><span class="p">,</span>
        <span class="na">password</span><span class="p">:</span> <span class="nx">hash</span><span class="p">,</span>
      <span class="p">});</span>
      <span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">Users</span><span class="p">.</span><span class="nx">findOne</span><span class="p">({</span> <span class="nx">email</span> <span class="p">});</span>

      <span class="k">return</span> <span class="nx">user</span><span class="p">;</span>
    <span class="p">},</span>
  <span class="p">},</span>
<span class="p">};</span>
</code></pre></div></div>

<p>Go ahead and give it a shot in Launchpad</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">mutation</span> <span class="p">{</span>
  <span class="nx">signup</span><span class="p">(</span><span class="nx">email</span><span class="p">:</span><span class="dl">"</span><span class="s2">c@test.com</span><span class="dl">"</span><span class="p">,</span> <span class="nx">password</span><span class="p">:</span><span class="dl">"</span><span class="s2">password</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">_id</span>
    <span class="nx">email</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="login">Login</h2>

<p>The login mutation is very similar to the one we just put together.</p>

<p>First we’ll check if a user with that email address exists.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">resolvers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="p">...</span>
  <span class="na">Mutation</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">login</span><span class="p">:</span> <span class="k">async</span> <span class="p">(</span><span class="nx">root</span><span class="p">,</span> <span class="p">{</span> <span class="nx">email</span><span class="p">,</span> <span class="nx">password</span> <span class="p">},</span> <span class="p">{</span> <span class="nx">mongo</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">Users</span> <span class="o">=</span> <span class="nx">mongo</span><span class="p">.</span><span class="nx">collection</span><span class="p">(</span><span class="dl">'</span><span class="s1">users</span><span class="dl">'</span><span class="p">);</span>

      <span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">Users</span><span class="p">.</span><span class="nx">findOne</span><span class="p">({</span> <span class="nx">email</span> <span class="p">});</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">user</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Email not found</span><span class="dl">'</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="p">...</span>
  <span class="p">},</span>
<span class="p">};</span>
</code></pre></div></div>

<p>Then we’ll compare the password supplied and the password we have stored. If they match then return the user!</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">resolvers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="p">...</span>
  <span class="na">Mutation</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">login</span><span class="p">:</span> <span class="k">async</span> <span class="p">(</span><span class="nx">root</span><span class="p">,</span> <span class="p">{</span> <span class="nx">email</span><span class="p">,</span> <span class="nx">password</span> <span class="p">},</span> <span class="p">{</span> <span class="nx">mongo</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">Users</span> <span class="o">=</span> <span class="nx">mongo</span><span class="p">.</span><span class="nx">collection</span><span class="p">(</span><span class="dl">'</span><span class="s1">users</span><span class="dl">'</span><span class="p">);</span>

      <span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">Users</span><span class="p">.</span><span class="nx">findOne</span><span class="p">({</span> <span class="nx">email</span> <span class="p">});</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">user</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Email not found</span><span class="dl">'</span><span class="p">);</span>
      <span class="p">}</span>

      <span class="kd">const</span> <span class="nx">validPassword</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">bcrypt</span><span class="p">.</span><span class="nx">compare</span><span class="p">(</span><span class="nx">password</span><span class="p">,</span> <span class="nx">user</span><span class="p">.</span><span class="nx">password</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">validPassword</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Password is incorrect</span><span class="dl">'</span><span class="p">);</span>
      <span class="p">}</span>

      <span class="k">return</span> <span class="nx">user</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="p">...</span>
  <span class="p">},</span>
<span class="p">};</span>
</code></pre></div></div>

<p>So now we’ve got our sign in &amp; sign up mutations working, but that isn’t all! We don’t want to force the user to have to login with every request. Enter…</p>

<h2 id="json-webtokens">JSON Web Tokens</h2>

<blockquote>
  <p>JSON Web Token (JWT) is an open standard (<a href="https://tools.ietf.org/html/rfc7519">RFC 7519</a>) that defines a compact and self-contained way for securely transmitting information between parties as a JSON object. This information can be verified and trusted because it is digitally signed. JWTs can be signed using a secret (with the <strong>HMAC</strong> algorithm) or a public/private key pair using <strong>RSA</strong>.</p>
</blockquote>

<p>For us this means that we can generate a JWT and use that as a means of confidently identifying a user. The flow will work like this</p>

<ol>
  <li>User logs in or signs up</li>
  <li>The server returns a JWT</li>
  <li>The client saves the JWT to their local storage (covered in part 2)</li>
  <li>The JWT is passed with each request from client to server (on the <code class="highlighter-rouge">Authorization</code> header — covered in part 2)</li>
  <li>The server uses the JWT to grab the user’s information and add it to <code class="highlighter-rouge">context</code></li>
</ol>

<blockquote>
  <p>A note on step 5: Since I wanted to keep this all browser based we need to do this manually. If you’ve got total control over the server though you can use <code class="highlighter-rouge">[express-jwt](https://www.npmjs.com/package/express-jwt)</code> to do this automatically. This is a good way to learn what that module is doing though!</p>
</blockquote>

<h3 id="the-secret">The Secret</h3>

<p>A JWT is signed with a secret value. We’ll want to come up with one and add that to the “Secrets” in Launchpad, like we did <code class="highlighter-rouge">MONGO_URL</code>. I’m storing it as <code class="highlighter-rouge">JWT_SECRET</code> with a value of <code class="highlighter-rouge">super-secret</code>.</p>

<p><code class="highlighter-rouge">launchpad apollo의 key값에 JWT_SCRET과 value값에 super-secret 추가함</code></p>

<p>Now, using that secret we’ll want to generate a new JWT and return it on the user object when they successfully login or sign up. First I’ll add <code class="highlighter-rouge">jwt</code> to the <code class="highlighter-rouge">User</code>type in our type definitions.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="p">...</span>

<span class="kd">const</span> <span class="nx">typeDefs</span> <span class="o">=</span> <span class="s2">`
  type User {
    _id: String
    email: String
    jwt: String
  }
  type Query {
    currentUser: User
  }
  type Mutation {
    login(email: String!, password: String!): User
    signup(email: String!, password: String!): User
  }
`</span><span class="p">;</span>

<span class="p">...</span>
</code></pre></div></div>

<p>Make sure you add import jwt from ‘jsonwebtoken’; to the top of your file.</p>

<h2 id="generating-the-token">Generating the Token</h2>

<p>Then, upon successful login, I’ll create a JWT. We’re passing the user’s id as part of the payload and secrets is coming from context.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">resolvers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="p">...</span>
  <span class="na">Mutation</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">login</span><span class="p">:</span> <span class="k">async</span> <span class="p">(</span><span class="nx">root</span><span class="p">,</span> <span class="p">{</span> <span class="nx">email</span><span class="p">,</span> <span class="nx">password</span> <span class="p">},</span> <span class="p">{</span> <span class="nx">mongo</span><span class="p">,</span> <span class="nx">secrets</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">Users</span> <span class="o">=</span> <span class="nx">mongo</span><span class="p">.</span><span class="nx">collection</span><span class="p">(</span><span class="dl">'</span><span class="s1">users</span><span class="dl">'</span><span class="p">);</span>

      <span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">Users</span><span class="p">.</span><span class="nx">findOne</span><span class="p">({</span> <span class="nx">email</span> <span class="p">});</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">user</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Email not found</span><span class="dl">'</span><span class="p">);</span>
      <span class="p">}</span>

      <span class="kd">const</span> <span class="nx">validPassword</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">bcrypt</span><span class="p">.</span><span class="nx">compare</span><span class="p">(</span><span class="nx">password</span><span class="p">,</span> <span class="nx">user</span><span class="p">.</span><span class="nx">password</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">validPassword</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Password is incorrect</span><span class="dl">'</span><span class="p">);</span>
      <span class="p">}</span>

      <span class="c1">// Generate the jwt and add it to the user document being returned.</span>
      <span class="nx">user</span><span class="p">.</span><span class="nx">jwt</span> <span class="o">=</span> <span class="nx">jwt</span><span class="p">.</span><span class="nx">sign</span><span class="p">({</span> <span class="na">_id</span><span class="p">:</span> <span class="nx">user</span><span class="p">.</span><span class="nx">_id</span> <span class="p">},</span> <span class="nx">secrets</span><span class="p">.</span><span class="nx">JWT_SECRET</span><span class="p">);</span>

      <span class="k">return</span> <span class="nx">user</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="p">...</span>
  <span class="p">},</span>
<span class="p">};</span>
</code></pre></div></div>

<p>We’ll do the same for sign up.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">resolvers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="p">...</span>
  <span class="na">Mutation</span><span class="p">:</span> <span class="p">{</span>
    <span class="p">...</span>
    <span class="na">signup</span><span class="p">:</span> <span class="k">async</span> <span class="p">(</span><span class="nx">root</span><span class="p">,</span> <span class="p">{</span> <span class="nx">email</span><span class="p">,</span> <span class="nx">password</span> <span class="p">},</span> <span class="p">{</span> <span class="nx">mongo</span><span class="p">,</span> <span class="nx">secrets</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">Users</span> <span class="o">=</span> <span class="nx">mongo</span><span class="p">.</span><span class="nx">collection</span><span class="p">(</span><span class="dl">'</span><span class="s1">users</span><span class="dl">'</span><span class="p">);</span>
      <span class="kd">const</span> <span class="nx">existingUser</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">Users</span><span class="p">.</span><span class="nx">findOne</span><span class="p">({</span> <span class="nx">email</span> <span class="p">});</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">existingUser</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Email already used</span><span class="dl">'</span><span class="p">);</span>
      <span class="p">}</span>

      <span class="kd">const</span> <span class="nx">hash</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">bcrypt</span><span class="p">.</span><span class="nx">hash</span><span class="p">(</span><span class="nx">password</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>
      <span class="k">await</span> <span class="nx">Users</span><span class="p">.</span><span class="nx">insert</span><span class="p">({</span>
        <span class="nx">email</span><span class="p">,</span>
        <span class="na">password</span><span class="p">:</span> <span class="nx">hash</span><span class="p">,</span>
      <span class="p">});</span>
      <span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">Users</span><span class="p">.</span><span class="nx">findOne</span><span class="p">({</span> <span class="nx">email</span> <span class="p">});</span>

      <span class="nx">user</span><span class="p">.</span><span class="nx">jwt</span> <span class="o">=</span> <span class="nx">jwt</span><span class="p">.</span><span class="nx">sign</span><span class="p">({</span> <span class="na">_id</span><span class="p">:</span> <span class="nx">user</span><span class="p">.</span><span class="nx">_id</span> <span class="p">},</span> <span class="nx">secrets</span><span class="p">.</span><span class="nx">JWT_SECRET</span><span class="p">);</span>

      <span class="k">return</span> <span class="nx">user</span><span class="p">;</span>
    <span class="p">},</span>
  <span class="p">},</span>
<span class="p">};</span>
</code></pre></div></div>

<h2 id="adding-the-current-user-to-context">Adding the Current User to Context</h2>

<p>Finally (for this part at least) we need to add the current user to context.</p>

<p>Remember, if you’re not using Launchpad you can use express-jwt to do this automatically. I also need to note that I’m basing this function a bit off of this launchpad which does the same thing but for the Auth0 service.</p>

<p>First, create a new function called getUser and check if we’ve got a potentially valid authorization token in the header.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">getUser</span> <span class="o">=</span> <span class="k">async</span> <span class="p">(</span><span class="nx">authorization</span><span class="p">,</span> <span class="nx">secrets</span><span class="p">,</span> <span class="nx">mongo</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">bearerLength</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">Bearer </span><span class="dl">"</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">authorization</span> <span class="o">&amp;&amp;</span> <span class="nx">authorization</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="nx">bearerLength</span><span class="p">)</span> <span class="p">{</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div></div>

<p>Then we’ll try to verify the token that was passed.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">getUser</span> <span class="o">=</span> <span class="k">async</span> <span class="p">(</span><span class="nx">authorization</span><span class="p">,</span> <span class="nx">secrets</span><span class="p">,</span> <span class="nx">mongo</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">bearerLength</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">Bearer </span><span class="dl">"</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">authorization</span> <span class="o">&amp;&amp;</span> <span class="nx">authorization</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="nx">bearerLength</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">token</span> <span class="o">=</span> <span class="nx">authorization</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">bearerLength</span><span class="p">);</span>
    <span class="kd">const</span> <span class="p">{</span> <span class="nx">ok</span><span class="p">,</span> <span class="nx">result</span> <span class="p">}</span> <span class="o">=</span> <span class="k">await</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">(</span><span class="nx">resolve</span> <span class="o">=&gt;</span>
      <span class="nx">jwt</span><span class="p">.</span><span class="nx">verify</span><span class="p">(</span><span class="nx">token</span><span class="p">,</span> <span class="nx">secrets</span><span class="p">.</span><span class="nx">JWT_SECRET</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">resolve</span><span class="p">({</span>
            <span class="na">ok</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
            <span class="na">result</span><span class="p">:</span> <span class="nx">err</span>
          <span class="p">});</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nx">resolve</span><span class="p">({</span>
            <span class="na">ok</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
            <span class="nx">result</span>
          <span class="p">});</span>
        <span class="p">}</span>
      <span class="p">})</span>
    <span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">ok</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">mongo</span>
        <span class="p">.</span><span class="nx">collection</span><span class="p">(</span><span class="dl">"</span><span class="s2">users</span><span class="dl">"</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">findOne</span><span class="p">({</span> <span class="na">_id</span><span class="p">:</span> <span class="nx">ObjectId</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">_id</span><span class="p">)</span> <span class="p">});</span>
      <span class="k">return</span> <span class="nx">user</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
      <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div></div>

<p>Then we’ll attempt to fetch the user from our database using the _id that we put into the jwt payload initially. ObjectId is coming from the mongdb module.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">getUser</span> <span class="o">=</span> <span class="k">async</span> <span class="p">(</span><span class="nx">authorization</span><span class="p">,</span> <span class="nx">secrets</span><span class="p">,</span> <span class="nx">mongo</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">bearerLength</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">Bearer </span><span class="dl">"</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">authorization</span> <span class="o">&amp;&amp;</span> <span class="nx">authorization</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="nx">bearerLength</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">token</span> <span class="o">=</span> <span class="nx">authorization</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">bearerLength</span><span class="p">);</span>
    <span class="kd">const</span> <span class="p">{</span> <span class="nx">ok</span><span class="p">,</span> <span class="nx">result</span> <span class="p">}</span> <span class="o">=</span> <span class="k">await</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">(</span><span class="nx">resolve</span> <span class="o">=&gt;</span>
      <span class="nx">jwt</span><span class="p">.</span><span class="nx">verify</span><span class="p">(</span><span class="nx">token</span><span class="p">,</span> <span class="nx">secrets</span><span class="p">.</span><span class="nx">JWT_SECRET</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">resolve</span><span class="p">({</span>
            <span class="na">ok</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
            <span class="na">result</span><span class="p">:</span> <span class="nx">err</span>
          <span class="p">});</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nx">resolve</span><span class="p">({</span>
            <span class="na">ok</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
            <span class="nx">result</span>
          <span class="p">});</span>
        <span class="p">}</span>
      <span class="p">})</span>
    <span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">ok</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">mongo</span>
        <span class="p">.</span><span class="nx">collection</span><span class="p">(</span><span class="dl">"</span><span class="s2">users</span><span class="dl">"</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">findOne</span><span class="p">({</span> <span class="na">_id</span><span class="p">:</span> <span class="nx">ObjectId</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">_id</span><span class="p">)</span> <span class="p">});</span>
      <span class="k">return</span> <span class="nx">user</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
      <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div></div>

<p>Finally, let’s go ahead and call this getUser function from the context function.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="k">async</span> <span class="kd">function</span> <span class="nx">context</span><span class="p">(</span><span class="nx">headers</span><span class="p">,</span> <span class="nx">secrets</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">mongo</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">client</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">MongoClient</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="nx">secrets</span><span class="p">.</span><span class="nx">MONGO_URL</span><span class="p">);</span>
    <span class="nx">mongo</span> <span class="o">=</span> <span class="nx">client</span><span class="p">.</span><span class="nx">db</span><span class="p">(</span><span class="dl">"</span><span class="s2">graphql-auth-demo-1</span><span class="dl">"</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">getUser</span><span class="p">(</span><span class="nx">headers</span><span class="p">[</span><span class="dl">"</span><span class="s2">authorization</span><span class="dl">"</span><span class="p">],</span> <span class="nx">secrets</span><span class="p">,</span> <span class="nx">mongo</span><span class="p">);</span>

  <span class="k">return</span> <span class="p">{</span>
    <span class="nx">headers</span><span class="p">,</span>
    <span class="nx">secrets</span><span class="p">,</span>
    <span class="nx">mongo</span><span class="p">,</span>
    <span class="nx">user</span>
  <span class="p">};</span>
<span class="p">}</span>
</code></pre></div></div>

<p>We can also update the <code class="highlighter-rouge">currentUser</code> query to return the user from context.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">resolvers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">Query</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">currentUser</span><span class="p">:</span> <span class="p">(</span><span class="nx">root</span><span class="p">,</span> <span class="nx">args</span><span class="p">,</span> <span class="nx">context</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">context</span><span class="p">.</span><span class="nx">user</span><span class="p">;</span>
    <span class="p">},</span>
  <span class="p">},</span>
  <span class="p">...</span>
<span class="p">};</span>
</code></pre></div></div>

<p>Let’s go ahead and check this out…</p>

<p>And there you have it! Runnable source code is available below</p>

            </div>
          </div>
        </div>
      </div>
      
      <div class="card" data-id="/2019/06/04/auth-client">
        <div class="card__container card__container--closed">
          <svg
            class="card__image"
            xmlns="http://www.w3.org/2000/svg"
            xmlns:xlink="http://www.w3.org/1999/xlink"
            viewBox="0 0 1920 1200"
            preserveAspectRatio="xMidYMid slice"
          >
            <defs>
              <clipPath id="/2019/06/04/auth-client-clip-path">
                <polygon
                  class="clip"
                  points="0,1200 0,0 1920,0 1920,1200"
                ></polygon>
              </clipPath>
            </defs>
            <image
              clip-path="url(#/2019/06/04/auth-client-clip-path)"
              width="1920"
              height="1200"
              xlink:href="/blog/img/d.jpg"
            ></image>
          </svg>
          <div class="card__content">
            <i class="card__btn-close fa fa-times"></i>
            <div class="card__caption">
              <span class="card__title">클라이언트 인증</span>
              <p class="card__subtitle">Client Auth</p>
            </div>
            <div class="card__copy">
              <div class="meta">
                <img
                  class="meta__avatar"
                  src="/blog/img/authors/athi.png"
                />
                <span class="meta__author">Athi</span>
                <span class="meta__date">2019-06-04</span>
              </div>
              <p><a href="https://medium.com/handlebar-labs/graphql-authentication-with-react-native-apollo-part-1-2-9613aacd80b3">참고자료</a></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// app.js</span>
<span class="k">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span> <span class="nx">Component</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">StackNavigator</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react-navigation</span><span class="dl">"</span><span class="p">;</span> <span class="c1">// 1.0.0-beta.19</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">ApolloClient</span><span class="p">,</span> <span class="nx">HttpLink</span><span class="p">,</span> <span class="nx">InMemoryCache</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">apollo-client-preset</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">ApolloProvider</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react-apollo</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">setContext</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">apollo-link-context</span><span class="dl">"</span><span class="p">;</span>

<span class="k">import</span> <span class="nx">Register</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./Register</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">Login</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./Login</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">Profile</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./Profile</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">signIn</span><span class="p">,</span> <span class="nx">signOut</span><span class="p">,</span> <span class="nx">getToken</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./util</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">AuthStack</span> <span class="o">=</span> <span class="nx">StackNavigator</span><span class="p">({</span>
  <span class="na">Register</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">screen</span><span class="p">:</span> <span class="nx">Register</span><span class="p">,</span>
    <span class="na">navigationOptions</span><span class="p">:</span> <span class="p">{</span> <span class="na">headerTitle</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Register</span><span class="dl">"</span> <span class="p">}</span>
  <span class="p">},</span>
  <span class="na">Login</span><span class="p">:</span> <span class="p">{</span> <span class="na">screen</span><span class="p">:</span> <span class="nx">Login</span><span class="p">,</span> <span class="na">navigationOptions</span><span class="p">:</span> <span class="p">{</span> <span class="na">headerTitle</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Login</span><span class="dl">"</span> <span class="p">}</span> <span class="p">}</span>
<span class="p">});</span>

<span class="kd">const</span> <span class="nx">LoggedInStack</span> <span class="o">=</span> <span class="nx">StackNavigator</span><span class="p">({</span>
  <span class="na">Profile</span><span class="p">:</span> <span class="p">{</span> <span class="na">screen</span><span class="p">:</span> <span class="nx">Profile</span><span class="p">,</span> <span class="na">navigationOptions</span><span class="p">:</span> <span class="p">{</span> <span class="na">headerTitle</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Profile</span><span class="dl">"</span> <span class="p">}</span> <span class="p">}</span>
<span class="p">});</span>

<span class="kd">const</span> <span class="nx">httpLink</span> <span class="o">=</span> <span class="nx">newHttpLink</span><span class="p">({</span> <span class="na">uri</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://graphql서버주소</span><span class="dl">'</span><span class="p">});</span>
<span class="kd">const</span> <span class="nx">authLink</span> <span class="o">=</span> <span class="nx">setContext</span><span class="p">(</span><span class="k">async</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="p">{</span><span class="nx">headers</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">token</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">getToken</span><span class="p">();</span>

  <span class="k">return</span> <span class="p">{</span>
    <span class="p">...</span><span class="nx">headers</span><span class="p">,</span>
    <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">authorization</span><span class="p">:</span> <span class="nx">token</span> <span class="p">?</span><span class="s2">`Bearer $(token)`</span> <span class="p">:</span><span class="kc">null</span><span class="p">,</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="kd">const</span> <span class="nx">link</span> <span class="o">=</span> <span class="nx">authLink</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">httpLInk</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ApolloClient</span><span class="p">({</span>
    <span class="nx">link</span><span class="p">,</span>
    <span class="na">cache</span><span class="p">:</span> <span class="k">new</span> <span class="nx">InMemoryCache</span><span class="p">(),</span>

<span class="p">})</span>

<span class="k">export</span> <span class="k">default</span> <span class="kd">class</span> <span class="nx">App</span> <span class="kd">extends</span> <span class="nx">Component</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">super</span><span class="p">(</span><span class="nx">props</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">loggedIn</span><span class="p">:</span> <span class="kc">false</span>
    <span class="p">};</span>
  <span class="p">}</span>

  <span class="k">async</span> <span class="nx">componentWillMount</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">token</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">getToken</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">token</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="na">loggedIn</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="nx">handleChangeLoginState</span> <span class="o">=</span> <span class="p">(</span><span class="nx">loggedIn</span> <span class="o">=</span> <span class="kc">false</span><span class="p">,</span> <span class="nx">jwt</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="nx">loggedIn</span> <span class="p">});</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">loggedIn</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">signIn</span><span class="p">(</span><span class="nx">jwt</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">signOut</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">};</span>

  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span><span class="p">(</span>
          <span class="o">&lt;</span><span class="nx">ApolloClient</span> <span class="nx">client</span><span class="o">=</span><span class="p">{</span><span class="nx">client</span><span class="p">}</span><span class="o">&gt;</span>
          <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">loggedIn</span> <span class="p">?</span>
            <span class="o">&lt;</span><span class="nx">LoggedInStack</span>
                <span class="nx">screenProps</span><span class="o">=</span><span class="p">{</span> <span class="na">changeLoginState</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleChangeLoginState</span> <span class="p">}</span>
            <span class="sr">/</span><span class="err">&gt;
</span>             <span class="p">:</span>
            <span class="o">&lt;</span><span class="nx">AuthStack</span>
                <span class="nx">screenProps</span><span class="o">=</span><span class="p">{</span> <span class="na">changeLoginState</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleChangeLoginState</span> <span class="p">}</span>
            <span class="sr">/</span><span class="err">&gt;
</span>        <span class="p">}</span>
        <span class="o">&lt;</span><span class="sr">/AolloClient</span><span class="err">&gt;
</span>      <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>bla</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// util.js</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">AsyncStorage</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react-native</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">AUTH_TOKEN</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">AUTH_TOKEN</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">token</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">getToken</span> <span class="o">=</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">token</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">token</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">token</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">AsyncStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="nx">AUTH_TOKEN</span><span class="p">);</span>
  <span class="k">return</span> <span class="nx">token</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">signIn</span> <span class="o">=</span> <span class="nx">newToken</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">token</span> <span class="o">=</span> <span class="nx">newToken</span><span class="p">;</span>
  <span class="k">return</span> <span class="nx">AsyncStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="nx">AUTH_TOKEN</span><span class="p">,</span> <span class="nx">newToken</span><span class="p">);</span>
<span class="p">};</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">signOut</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">token</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
  <span class="k">return</span> <span class="nx">AsyncStorage</span><span class="p">.</span><span class="nx">removeItem</span><span class="p">(</span><span class="nx">AUTH_TOKEN</span><span class="p">);</span>
<span class="p">};</span>
</code></pre></div></div>

<p>bla</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//login.js</span>
<span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span>
  <span class="nx">Container</span><span class="p">,</span>
  <span class="nx">Button</span><span class="p">,</span>
  <span class="nx">Content</span><span class="p">,</span>
  <span class="nx">Form</span><span class="p">,</span>
  <span class="nx">Item</span><span class="p">,</span>
  <span class="nx">Input</span><span class="p">,</span>
  <span class="nx">Text</span>
<span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">native-base</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">gql</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">graphql-tag</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">graphql</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react-apollo</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">class</span> <span class="nx">Login</span> <span class="kd">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">super</span><span class="p">(</span><span class="nx">props</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">email</span><span class="p">:</span> <span class="dl">""</span><span class="p">,</span>
      <span class="na">emailError</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="na">password</span><span class="p">:</span> <span class="dl">""</span><span class="p">,</span>
      <span class="na">passwordError</span><span class="p">:</span> <span class="kc">false</span>
    <span class="p">};</span>
  <span class="p">}</span>

  <span class="nx">handleInputChange</span> <span class="o">=</span> <span class="p">(</span><span class="nx">field</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">newState</span> <span class="o">=</span> <span class="p">{</span>
      <span class="p">...</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">,</span>
      <span class="p">[</span><span class="nx">field</span><span class="p">]:</span> <span class="nx">value</span>
    <span class="p">};</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">(</span><span class="nx">newState</span><span class="p">);</span>
  <span class="p">};</span>

  <span class="nx">handleSubmit</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="p">{</span> <span class="nx">email</span><span class="p">,</span> <span class="nx">password</span> <span class="p">}</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">email</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="na">emailError</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>
    <span class="p">}</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="na">emailError</span><span class="p">:</span> <span class="kc">false</span> <span class="p">});</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">password</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="na">passwordError</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>
    <span class="p">}</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="na">passwordError</span><span class="p">:</span> <span class="kc">false</span> <span class="p">});</span>

    <span class="c1">// return this.props.screenProps.changeLoginState(true);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">props</span>
      <span class="p">.</span><span class="nx">login</span><span class="p">(</span><span class="nx">email</span><span class="p">,</span> <span class="nx">password</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">then</span><span class="p">(({</span> <span class="nx">data</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">screenProps</span><span class="p">.</span><span class="nx">changeLoginState</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="nx">data</span><span class="p">.</span><span class="nx">login</span><span class="p">.</span><span class="nx">jwt</span><span class="p">);</span>
      <span class="p">})</span>
      <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">e</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="sr">/email/i</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">message</span><span class="p">))</span> <span class="p">{</span>
          <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="na">emailError</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="sr">/password/i</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">message</span><span class="p">))</span> <span class="p">{</span>
          <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="na">passwordError</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>
        <span class="p">}</span>
      <span class="p">});</span>
  <span class="p">};</span>

  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="p">{</span> <span class="nx">emailError</span><span class="p">,</span> <span class="nx">passwordError</span> <span class="p">}</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">;</span>

    <span class="k">return</span> <span class="p">(</span>
      <span class="o">&lt;</span><span class="nx">Container</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">Content</span><span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="nx">Form</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="nx">Item</span> <span class="nx">error</span><span class="o">=</span><span class="p">{</span><span class="nx">emailError</span><span class="p">}</span><span class="o">&gt;</span>
              <span class="o">&lt;</span><span class="nx">Input</span>
                <span class="nx">placeholder</span><span class="o">=</span><span class="dl">"</span><span class="s2">Email</span><span class="dl">"</span>
                <span class="nx">onChangeText</span><span class="o">=</span><span class="p">{</span><span class="nx">value</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleInputChange</span><span class="p">(</span><span class="dl">"</span><span class="s2">email</span><span class="dl">"</span><span class="p">,</span> <span class="nx">value</span><span class="p">)}</span>
                <span class="nx">keyboardType</span><span class="o">=</span><span class="dl">"</span><span class="s2">email-address</span><span class="dl">"</span>
                <span class="nx">autoCapitalize</span><span class="o">=</span><span class="dl">"</span><span class="s2">none</span><span class="dl">"</span>
                <span class="nx">autoCorrect</span><span class="o">=</span><span class="p">{</span><span class="kc">false</span><span class="p">}</span>
              <span class="sr">/</span><span class="err">&gt;
</span>            <span class="o">&lt;</span><span class="sr">/Item</span><span class="err">&gt;
</span>            <span class="o">&lt;</span><span class="nx">Item</span> <span class="nx">error</span><span class="o">=</span><span class="p">{</span><span class="nx">passwordError</span><span class="p">}</span><span class="o">&gt;</span>
              <span class="o">&lt;</span><span class="nx">Input</span>
                <span class="nx">placeholder</span><span class="o">=</span><span class="dl">"</span><span class="s2">Password</span><span class="dl">"</span>
                <span class="nx">onChangeText</span><span class="o">=</span><span class="p">{</span><span class="nx">value</span> <span class="o">=&gt;</span>
                  <span class="k">this</span><span class="p">.</span><span class="nx">handleInputChange</span><span class="p">(</span><span class="dl">"</span><span class="s2">password</span><span class="dl">"</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span>
                <span class="p">}</span>
                <span class="nx">autoCapitalize</span><span class="o">=</span><span class="dl">"</span><span class="s2">none</span><span class="dl">"</span>
                <span class="nx">autoCorrect</span><span class="o">=</span><span class="p">{</span><span class="kc">false</span><span class="p">}</span>
                <span class="nx">secureTextEntry</span>
              <span class="o">/&gt;</span>
            <span class="o">&lt;</span><span class="sr">/Item</span><span class="err">&gt;
</span>          <span class="o">&lt;</span><span class="sr">/Form</span><span class="err">&gt;
</span>          <span class="o">&lt;</span><span class="nx">Button</span> <span class="nx">full</span> <span class="nx">onPress</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">handleSubmit</span><span class="p">}</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="nx">Text</span><span class="o">&gt;</span><span class="nx">Sign</span> <span class="nx">In</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>          <span class="o">&lt;</span><span class="sr">/Button</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="sr">/Content</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="sr">/Container</span><span class="err">&gt;
</span>    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">graphql</span><span class="p">(</span>
  <span class="nx">gql</span><span class="s2">`
    mutation LogIn($email: String!, $password: String!) {
      login(email: $email, password: $password) {
        _id
        email
        jwt
      }
    }
  `</span><span class="p">,</span>
  <span class="p">{</span>
    <span class="na">props</span><span class="p">:</span> <span class="p">({</span> <span class="nx">mutate</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">({</span>
      <span class="na">login</span><span class="p">:</span> <span class="p">(</span><span class="nx">email</span><span class="p">,</span> <span class="nx">password</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">mutate</span><span class="p">({</span> <span class="na">variables</span><span class="p">:</span> <span class="p">{</span> <span class="nx">email</span><span class="p">,</span> <span class="nx">password</span> <span class="p">}</span> <span class="p">})</span>
    <span class="p">})</span>
  <span class="p">}</span>
<span class="p">)(</span><span class="nx">Login</span><span class="p">);</span>
</code></pre></div></div>

<p>bla</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// register.js</span>
<span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span>
  <span class="nx">Container</span><span class="p">,</span>
  <span class="nx">Button</span><span class="p">,</span>
  <span class="nx">Content</span><span class="p">,</span>
  <span class="nx">Form</span><span class="p">,</span>
  <span class="nx">Item</span><span class="p">,</span>
  <span class="nx">Input</span><span class="p">,</span>
  <span class="nx">Text</span>
<span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">native-base</span><span class="dl">"</span><span class="p">;</span>

<span class="k">import</span> <span class="p">{</span><span class="nx">graphql</span><span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react-apollo</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">gql</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">graph-tag</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">class</span> <span class="nx">Register</span> <span class="kd">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">super</span><span class="p">(</span><span class="nx">props</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">email</span><span class="p">:</span> <span class="dl">""</span><span class="p">,</span>
      <span class="na">emailError</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="na">password</span><span class="p">:</span> <span class="dl">""</span><span class="p">,</span>
      <span class="na">passwordError</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="na">confirmPassword</span><span class="p">:</span> <span class="dl">""</span><span class="p">,</span>
      <span class="na">confirmPasswordError</span><span class="p">:</span> <span class="kc">false</span>
    <span class="p">};</span>
  <span class="p">}</span>

  <span class="nx">handleInputChange</span> <span class="o">=</span> <span class="p">(</span><span class="nx">field</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">newState</span> <span class="o">=</span> <span class="p">{</span>
      <span class="p">...</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">,</span>
      <span class="p">[</span><span class="nx">field</span><span class="p">]:</span> <span class="nx">value</span>
    <span class="p">};</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">(</span><span class="nx">newState</span><span class="p">);</span>
  <span class="p">};</span>

  <span class="nx">handleSubmit</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="p">{</span> <span class="nx">email</span><span class="p">,</span> <span class="nx">password</span><span class="p">,</span> <span class="nx">confirmPassword</span> <span class="p">}</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">email</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="na">emailError</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>
    <span class="p">}</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="na">emailError</span><span class="p">:</span> <span class="kc">false</span> <span class="p">});</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">password</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="na">passwordError</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>
    <span class="p">}</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="na">passwordError</span><span class="p">:</span> <span class="kc">false</span> <span class="p">});</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">confirmPassword</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="na">confirmPasswordError</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>
    <span class="p">}</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="na">confirmPasswordError</span><span class="p">:</span> <span class="kc">false</span> <span class="p">});</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">password</span> <span class="o">!==</span> <span class="nx">confirmPassword</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="na">passwordError</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="na">confirmPasswordError</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>
    <span class="p">}</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="na">passwordError</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span> <span class="na">confirmPasswordError</span><span class="p">:</span> <span class="kc">false</span> <span class="p">});</span>

    <span class="c1">// return this.props.screenProps.changeLoginState(true);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">props</span>
      <span class="p">.</span><span class="nx">signup</span><span class="p">(</span><span class="nx">email</span><span class="p">,</span> <span class="nx">passowrd</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">then</span><span class="p">(({</span><span class="nx">data</span><span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">screenProps</span><span class="p">.</span><span class="nx">changeLoginState</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="nx">data</span><span class="p">.</span><span class="nx">signup</span><span class="p">.</span><span class="nx">jwt</span><span class="p">)</span><span class="dl">'</span><span class="s1">
      })
      .catch(e =&gt; {
        if (/email/i.test(e.message)) {
          this.setState({ emailError: true});
        }
        if (/password/i.test(e.message)) {
          this.setState({ passwordError: true});
        }
      })

  };

  render() {
    const { navigation } = this.props;
    const { emailError, passwordError, confirmPasswordError } = this.state;

    return (
      &lt;Container&gt;
        &lt;Content&gt;
          &lt;Form&gt;
            &lt;Item error={emailError}&gt;
              &lt;Input
                placeholder="Email"
                onChangeText={value =&gt; this.handleInputChange("email", value)}
                keyboardType="email-address"
                autoCapitalize="none"
                autoCorrect={false}
              /&gt;
            &lt;/Item&gt;
            &lt;Item error={passwordError}&gt;
              &lt;Input
                placeholder="Password"
                onChangeText={value =&gt;
                  this.handleInputChange("password", value)
                }
                autoCapitalize="none"
                autoCorrect={false}
                secureTextEntry
              /&gt;
            &lt;/Item&gt;
            &lt;Item last error={confirmPasswordError}&gt;
              &lt;Input
                placeholder="Confirm Password"
                onChangeText={value =&gt;
                  this.handleInputChange("confirmPassword", value)
                }
                autoCapitalize="none"
                autoCorrect={false}
                secureTextEntry
              /&gt;
            &lt;/Item&gt;
          &lt;/Form&gt;
          &lt;Button full onPress={this.handleSubmit}&gt;
            &lt;Text&gt;Sign Up&lt;/Text&gt;
          &lt;/Button&gt;
          &lt;Button full transparent onPress={() =&gt; navigation.navigate("Login")}&gt;
            &lt;Text&gt;Sign In&lt;/Text&gt;
          &lt;/Button&gt;
        &lt;/Content&gt;
      &lt;/Container&gt;
    );
  }
}

export default graphql(
  gql`
    mutation SignUp($email: String!, $password: String!) {
      signup(email: $email, password: $password) {
        _id
        email
        jwt
      }
    }
  `,
  {
    props: ({ mutate }) =&gt; {
      signup: (email, password) =&gt; mutate({ variables: { email, passwrod } });
    }
  }
)(Register);
</span></code></pre></div></div>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// profile.js</span>

<span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">View</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react-native</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Container</span><span class="p">,</span> <span class="nx">Text</span><span class="p">,</span> <span class="nx">Button</span><span class="p">,</span> <span class="nx">Content</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">native-base</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">graphql</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react-apollo</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">gql</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">graphql-tag</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">class</span> <span class="nx">Logout</span> <span class="kd">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
  <span class="nx">handleLogout</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">screenProps</span><span class="p">.</span><span class="nx">changeLoginState</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
  <span class="p">};</span>

  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="p">{</span> <span class="nx">currentUser</span> <span class="p">}</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
    <span class="k">return</span> <span class="p">(</span>
      <span class="o">&lt;</span><span class="nx">Container</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">Content</span><span class="o">&gt;</span>
          <span class="p">{</span><span class="nx">currentUser</span> <span class="o">&amp;&amp;</span> <span class="p">(</span>
            <span class="o">&lt;</span><span class="nx">View</span><span class="o">&gt;</span>
              <span class="o">&lt;</span><span class="nx">Text</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">currentUser</span><span class="p">.</span><span class="nx">_id</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>              <span class="o">&lt;</span><span class="nx">Text</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">currentUser</span><span class="p">.</span><span class="nx">password</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>            <span class="o">&lt;</span><span class="sr">/View</span><span class="err">&gt;
</span>          <span class="p">)}</span>
          <span class="o">&lt;</span><span class="nx">Button</span> <span class="nx">full</span> <span class="nx">onPress</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">handleLogout</span><span class="p">}</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="nx">Text</span><span class="o">&gt;</span><span class="nx">Log</span> <span class="nx">Out</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>          <span class="o">&lt;</span><span class="sr">/Button</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="sr">/Content</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="sr">/Container</span><span class="err">&gt;
</span>    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">graphql</span><span class="p">(</span>
  <span class="nx">gql</span><span class="s2">`
    query User {
      currentUser {
        _id
        email
      }
    }
  `</span>
<span class="p">)(</span><span class="nx">Logout</span><span class="p">);</span>
</code></pre></div></div>

            </div>
          </div>
        </div>
      </div>
      
      <div class="card" data-id="/2019/06/04/react-native-align-center">
        <div class="card__container card__container--closed">
          <svg
            class="card__image"
            xmlns="http://www.w3.org/2000/svg"
            xmlns:xlink="http://www.w3.org/1999/xlink"
            viewBox="0 0 1920 1200"
            preserveAspectRatio="xMidYMid slice"
          >
            <defs>
              <clipPath id="/2019/06/04/react-native-align-center-clip-path">
                <polygon
                  class="clip"
                  points="0,1200 0,0 1920,0 1920,1200"
                ></polygon>
              </clipPath>
            </defs>
            <image
              clip-path="url(#/2019/06/04/react-native-align-center-clip-path)"
              width="1920"
              height="1200"
              xlink:href="/blog/img/f.jpg"
            ></image>
          </svg>
          <div class="card__content">
            <i class="card__btn-close fa fa-times"></i>
            <div class="card__caption">
              <span class="card__title">리액트 네이티브 가운데정렬</span>
              <p class="card__subtitle">Jekyll folder's structure</p>
            </div>
            <div class="card__copy">
              <div class="meta">
                <img
                  class="meta__avatar"
                  src="/blog/img/authors/athi.png"
                />
                <span class="meta__author">Athi</span>
                <span class="meta__date">2019-06-04</span>
              </div>
              <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span> <span class="nx">Component</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Text</span><span class="p">,</span> <span class="nx">View</span><span class="p">,</span> <span class="nx">StyleSheet</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react-native</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">styles</span> <span class="o">=</span> <span class="nx">StyleSheet</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span>
  <span class="na">login</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">flex</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="na">justifyContent</span><span class="p">:</span> <span class="dl">"</span><span class="s2">center</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">alignItems</span><span class="p">:</span> <span class="dl">"</span><span class="s2">center</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="kd">class</span> <span class="nx">Login</span> <span class="kd">extends</span> <span class="nx">Component</span> <span class="p">{</span>
  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span>
      <span class="o">&lt;</span><span class="nx">View</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">login</span><span class="p">}</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">Text</span><span class="o">&gt;</span> <span class="nx">Login</span> <span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="sr">/View</span><span class="err">&gt;
</span>    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">Login</span><span class="p">;</span>
</code></pre></div></div>

<p>alignItems는 가로로 가운데 정렬
justifyContent는 세로로 가운데 정렬
<img src="https://i.imgur.com/n4DVf3q.png" alt="가운데 정렬" /></p>

            </div>
          </div>
        </div>
      </div>
      
      <div class="card" data-id="/2019/01/06/get-started-quickly">
        <div class="card__container card__container--closed">
          <svg
            class="card__image"
            xmlns="http://www.w3.org/2000/svg"
            xmlns:xlink="http://www.w3.org/1999/xlink"
            viewBox="0 0 1920 1200"
            preserveAspectRatio="xMidYMid slice"
          >
            <defs>
              <clipPath id="/2019/01/06/get-started-quickly-clip-path">
                <polygon
                  class="clip"
                  points="0,1200 0,0 1920,0 1920,1200"
                ></polygon>
              </clipPath>
            </defs>
            <image
              clip-path="url(#/2019/01/06/get-started-quickly-clip-path)"
              width="1920"
              height="1200"
              xlink:href="/blog/img/a.jpg"
            ></image>
          </svg>
          <div class="card__content">
            <i class="card__btn-close fa fa-times"></i>
            <div class="card__caption">
              <span class="card__title">#6 빠르게 만들어보고 배우기</span>
              <p class="card__subtitle">Get started quickly</p>
            </div>
            <div class="card__copy">
              <div class="meta">
                <img
                  class="meta__avatar"
                  src="/blog/img/authors/athi.png"
                />
                <span class="meta__author">Athi</span>
                <span class="meta__date">2019-01-06</span>
              </div>
              <h1 id="미리보기-서버-실행시키기">미리보기 서버 실행시키기</h1>

<p>전 강의에서 모든 설치를 완료하였으므로 이제 서버를 실행 시킬 수 있습니다.</p>

<p>cmd(명령 프롬프트)창을 켜도되고, bash 창을 켜서 하셔도 됩니다.<br />
저는 cmd창을 키고 진행하겠습니다.</p>

<p>cmd에서는 <code class="highlighter-rouge">dir</code> 명령어는 현재폴더에 있는 목록들을 확인 할 수 있습니다.
이동 명령어는 <code class="highlighter-rouge">cd</code>로 똑같습니다.</p>

<p>git clone으로 가져온 파일 목록에 가서 <code class="highlighter-rouge">jekyll serve</code> 미리보기 서버를 실행시켜줍니다.</p>

<p><img src="https://i.imgur.com/4hOXykO.png" alt="서버실행" /></p>

<p>저렇게 뜨면 잘 실행이 성공한 것 입니다.</p>

<p><code class="highlighter-rouge">http://127.0.0.1</code>은 <code class="highlighter-rouge">로컬주소</code></p>

<p>즉 인터넷을 통해 다른 컴퓨터에 접속하는 서버가 아닌 자기컴퓨터에서 접속할 수 있음을 뜻하고</p>

<p><code class="highlighter-rouge">:4000</code>은 <code class="highlighter-rouge">포트</code>를 의미</p>

<p>포트란 서버에 들어갈 수 있는 문이 여러개가 있는데 4000이라고 적혀져 있는 문을 열어 놓은거라고 할 수 있습니다.</p>

<p><code class="highlighter-rouge">/athi/</code>는 따로 지정해 놓은것으로 나중에 원하는대로 바꿀 수 있습니다.</p>

<p>그래서 이제 미리보기 서버를 접속할 수 있습니다.</p>

<p>인터넷에 아래를 주소창에 입력해주면 접속이 잘 됩니다.</p>

<p>🔥주의! <code class="highlighter-rouge">/</code>를 꼭 붙여주세요.</p>

<p><code class="highlighter-rouge">http://localhost:4000/athi/</code></p>

<p><code class="highlighter-rouge">http://127.0.0.1:4000/athi/</code></p>

<p><img src="https://i.imgur.com/8gTRCuN.png" alt="접속" /></p>

<h1 id="글-작성하기">글 작성하기</h1>

<h2 id="글작성-폴더">글작성 폴더</h2>

<p><img src="https://i.imgur.com/IyqZUK1.png" alt="폴더구조" /></p>

<p>이렇게 생긴 폴더구조에서 당장 필요한건 <code class="highlighter-rouge">_posts</code>폴더 입니다.</p>

<p>이 폴더에 평소 우리가 컴퓨터 폴더에서 텍스트파일을 만들고 글을 쓰고 저장하는 것처럼 작성하면 됩니다.</p>

<h2 id="글쓰기-위해-markdown파일-만들기">글쓰기 위해 markdown파일 만들기</h2>

<p>🔥 주의!</p>

<ol>
  <li>
    <p>파일명 형식이 앞에 날짜가 들어가 있어야하고 파일제목에는 한글이 들어가선 안됩니다(jekyll이 인식하지 못하기 때문).
yyyy-mm-dd-english-title.md</p>
  </li>
  <li>
    <p>data시간이 <a href="https://time.is/UTC">utc(세계 표준시계)</a>를 넘어가면 블로그에 표시가 되지 않습니다.</p>
  </li>
</ol>

<p>지금 현재 저의 _post폴더 상태입니다.</p>

<p><img src="https://i.imgur.com/ynu5fWS.png" alt="post폴더" /></p>

<p>여기서 <code class="highlighter-rouge">test폴더</code>를 만들고 <code class="highlighter-rouge">2019-06-30-test-posting.md</code> 파일을 만들겠습니다.</p>

<h2 id="글-내용-입력하기">글 내용 입력하기</h2>

<p><code class="highlighter-rouge">2019-06-30-test-posting.md</code> 파일에 다음과 같이 입력해주시면 됩니다.</p>

<p>아직 이해되지 않더라도 따라와 주세요.</p>

<p>차근 차근 설명해 드리겠습니다.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>---
title: "#00 테스트 글 작성"
subtitle: "Test Posting"
author: "Athi"
avatar: "/img/authors/athi.png"
image: "/img/a.jpg"
tags: [test1, tag2, tag3]
date: 2019-06-30 12:12:12
---

# Dolor sit amet?

Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin vestibulum non mi non pulvinar. Donec tempus risus vel ex fringilla tempor. Vivamus pharetra non mauris quis fermentum. Vestibulum sed maximus elit, sit amet suscipit orci. Morbi at enim at libero dignissim egestas vel ac nisi. Etiam at lectus a arcu sodales consequat. Aliquam consequat ligula sed purus tincidunt, a ultrices nibh dapibus. Phasellus convallis ipsum nec semper ultricies. In facilisis lacus velit, sit amet lacinia velit blandit id. Nullam ut magna erat. Aliquam sit amet dapibus odio, aliquet tempus tortor. Donec in nisi massa.

# Aliquam suscipit.

Cras eget nisl accumsan, porta nisl in, egestas sapien. Vestibulum gravida nulla sed facilisis tempor. Suspendisse maximus nisi sit amet velit sodales fringilla. Vivamus luctus risus eget dui consectetur porttitor. Maecenas ut ultrices orci. Maecenas mollis est eu sodales mollis. Nulla facilisi. Suspendisse eros arcu, elementum sed sem eu, pharetra rhoncus odio. Proin nec tincidunt velit. Cras nisl augue, faucibus sed mauris in, vestibulum mollis nisl. Nam id libero ultrices, consequat ex vitae, convallis nulla.

## 두번째 태그

`Aliquam suscipit fermentum mauris a accumsan. In facilisis, mauris quis pulvinar tempus, turpis sapien sodales nibh, nec feugiat augue est quis nisi.` Fusce eget odio feugiat, luctus quam et, dapibus nulla. Sed ornare lacus non libero lacinia pretium. In eu dui vitae purus euismod feugiat ac ac est. Morbi vitae pretium lorem, non eleifend felis. Nullam at massa feugiat, rutrum elit at, semper lacus. Etiam vel rutrum felis. Nullam quis auctor lorem, et tempor arcu.

### 세번째 태그

Lorem ipsum dolor sit amet, consectetur adipiscing elit. `Proin vestibulum non mi non pulvinar.` Donec tempus risus vel ex fringilla tempor. Vivamus pharetra non mauris quis fermentum. Vestibulum sed maximus elit, sit amet suscipit orci. Morbi at enim at libero dignissim egestas vel ac nisi. Etiam at lectus a arcu sodales consequat. Aliquam consequat ligula sed purus tincidunt, a ultrices nibh dapibus. Phasellus convallis ipsum nec semper ultricies. In facilisis lacus velit, sit amet lacinia velit blandit id. Nullam ut magna erat. Aliquam sit amet dapibus odio, aliquet tempus tortor. Donec in nisi massa.

&gt; 인간은 최선의 선택이 아닌 만족하기를 한다.



</code></pre></div></div>

<h2 id="태그-추가-된것-확인하기">태그 추가 된것 확인하기</h2>

<p><img src="https://i.imgur.com/bQH3PtI.png" alt="서버확인" /></p>

<p>이제 각 태그를 클릭해보세요.<br />
각 태그에 맞는 작성된 글이 분류된 것을 확인하실 수 있습니다.</p>

<p><img src="https://i.imgur.com/qNoZb3J.png" alt="글 작성된것 확인" /></p>

<p>이렇게 예쁘게 글이 작성도 되었구요.</p>

<p><img src="https://i.imgur.com/uIMUXIK.png" alt="글 작성된것 확인2" /></p>

<p>하지만 자세히 보시면 태그에 색깔이 입혀지지 않은태그 tag2, tag3가 추가 된것을 보실 수 있습니다.</p>

<p>그것은 저희가 태그를 test1, tag2, tag3 추가 했기 떄문이죠.</p>

<p>test1은 이미 만들어진 태그이기 때문에 따로 빨간색으로 이미 존재하지만 tag2와 tag3은 저희가 따로 색깔을 입혀야 합니다.</p>

<p>자동으로 랜덤색이 지정됬으면 좋겠다구요?<br />
모든 강의를 마치면 그것도 하실 수 있을 겁니다.</p>

<p>색깔은 저를 주로 <a href="https://flatuicolors.com/">팔레트</a>에서 가져와서 씁니다.
<img src="https://i.imgur.com/no8nQ3Y.png" alt="팔레트" /></p>

<p>회색 - <code class="highlighter-rouge">#636e72</code>
검정색 - <code class="highlighter-rouge">#2d3436</code></p>

<p>저는 이 두색을 가져왔습니다.</p>

<p>이제 <code class="highlighter-rouge">css-&gt;modern-blog.css</code> 파일로 가주세요.</p>

<p>스크롤을 맨 아래쪽으로 내리시면</p>

<p>주석으로 <code class="highlighter-rouge">--------TAG--------</code> 되었는걸 보실 수 있습니다.</p>

<p><img src="https://i.imgur.com/bBP6nfP.png" alt="태그주석" /></p>

<p>여기에 다음과 같이 적어주시면 됩니다.</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">.[</span><span class="err">주석명</span><span class="o">]</span><span class="nt">TagLink</span> <span class="o">&gt;</span> <span class="nt">code</span> <span class="p">{</span>
  <span class="nl">background</span><span class="p">:</span> <span class="p">[</span><span class="err">색깔</span><span class="p">]</span> <span class="cp">!important</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>제 상황같은 경우 다음 코드를 추가 해줄 겁니다.</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">.tag2TagLink</span> <span class="o">&gt;</span> <span class="nt">code</span> <span class="p">{</span>
  <span class="nl">background</span><span class="p">:</span> <span class="m">#636e72</span> <span class="cp">!important</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.tag3TagLink</span> <span class="o">&gt;</span> <span class="nt">code</span> <span class="p">{</span>
  <span class="nl">background</span><span class="p">:</span> <span class="m">#2d3436</span> <span class="cp">!important</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>잘 추가 되었다면 색깔이 바뀐걸 확인할 수 있습니다.</p>

<p><img src="https://i.imgur.com/KpfOVM6.png" alt="색깔추가" /></p>

<h3 id="왜-태그형식인-블로그인가">왜 태그형식인 블로그인가?</h3>

<p>글을 쓰다보면 주제가 겹치는 경우가 있습니다.</p>

<p>태그형식을 쓰면 글을 두번 쓰는걸 방지할 수 있고 따라서 블로그가 지져분해지는걸 방지할 수 있습니다.</p>

<p>카테고리 형식을 추가적으로 쓰지 않은 이유는 블로그를 볼 때 직관적인것을 헤치므로 추가하지 않았습니다.</p>

<h2 id="작성법-이해하기">작성법 이해하기</h2>

<p>글 가장 위에는 포스팅할 글에 대한 정보를 작성하고 그 밑에는 markdown처럼 작성하시면 됩니다.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>title = 글 제목
subtitle = 소제목
author = 저자명
avatar = 나를 대표할 만한 아바타 이미지
image = 글 이미지
tags = 태그 지정
data = 게시날짜
</code></pre></div></div>

<p>다른건 다 잘 이해되는데 avatar &amp; image 부분이 잘 이해 안되는분이 계실겁니다.</p>

<p>그건 바로 <code class="highlighter-rouge">img폴더</code>를 사용했기 때문인데 왼쪽에 보시면 img폴더가 보이실 겁니다.</p>

<p><img src="https://i.imgur.com/bSx8GG3.png" alt="이미지폴더" /></p>

<p>여기에 우리가 원하는 이미지를 저장해놓고 불러와서 씁니다.</p>

<p>avatar와 image에는 <code class="highlighter-rouge">/img/</code> 경로부터 시작에 내가 원하는 사진이 있는곳까지의 경로를 적어준 것입니다.</p>

<p>🔥주의! 이미지를 포스팅할 때는 규격에 맞춰서 해주어야 깔끔하게 포스팅 됩니다.<br />
이미지 규격은 1920x1200 입니다.</p>

<p>이 떄 그렇게 이미지 규격에 맞는 이미지를 어느 세월에 구하냐고 하시는분이 계실텐데 걱정하지 마세요.<br />
unsplash에서 고퀄이미지를 규격에 맞게 가져올 수 있습니다</p>

<h3 id="unsplash에서-무료로-고퀄이미지-가져오기">unsplash에서 무료로 고퀄이미지 가져오기</h3>

<p><a href="https://unsplash.com/">unsplash</a>
unsplash에 들어가서 원하는 이미지를 찾아주세요.</p>

<p><img src="https://i.imgur.com/ncgJSH6.jpg" alt="원하는 이미지" /></p>

<p>원하는 이미지를 클릭한뒤 주소창에 보면 <code class="highlighter-rouge">[사진id]</code>가 있습니다.</p>

<p><code class="highlighter-rouge">[사진id]</code>를 이용해 주소창에 다시 밑에 형식으로 입력해주세요.</p>

<p><code class="highlighter-rouge">https://source.unsplash.com/[사진id]/[사진가로크기]x[사진세로크기]</code></p>

<p><code class="highlighter-rouge">https://source.unsplash.com/ssiCmbyVKzs/1920x1200</code></p>

<p>원하는 규격에 맞혀진 사진이 나온곳에서 마우스 오른쪽버튼을 누르고 다른 이미지 저장을 클릭에서 원하는 위치에 저장합니다.</p>

<p><img src="https://i.imgur.com/3tW8Fhx.jpg" alt="나온이미지" /></p>

<p>저는 img밑에 firework라고 저장 했습니다.</p>

<h2 id="포스팅-글-이미지-수정">포스팅 글 이미지 수정</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>---
title: "#00 테스트 글 작성"
subtitle: "Test Posting"
author: "Athi"
avatar: "/img/authors/athi.png"
image: "/img/firework.jpg"
tags: [test1, tag2, tag3]
date: 2019-06-30 12:12:12
---
</code></pre></div></div>

<p>아까 포스팅 된글에서 image부분을 <code class="highlighter-rouge">firework.jpg</code>로 수정하면 포스팅된 글의 이미지가 바뀐걸 보실 수 있습니다.</p>

<p><img src="https://i.imgur.com/MwjGTYZ.png" alt="이미지수정" /></p>

<h2 id="avatar-이미지-수정하기">avatar 이미지 수정하기</h2>

<p><a href="https://www.favicon-generator.org/">아바타 이미지 만들기</a></p>

<p><img src="https://i.imgur.com/M4ShCkf.png" alt="아이콘" /></p>

<p>이 사이트에서 원하는 이미지를 등록한 뒤 Create Favicon을 누르면</p>

<p>아바타 크기의 이미지가 만들어진다.</p>

<p>나머지는 이미지를 수정한 것처럼 똑가팅 하면 됩니다.</p>

<h1 id="나만의-블로그-만들기서버-배포하기">나만의 블로그 만들기(서버 배포하기)</h1>

<p>이제 거의 다 오셨습니다.</p>

<p>이 챕터만 끝나시면 자동화 도구를 얻으실 수 있습니다.</p>

<h2 id="저장소-만들기">저장소 만들기</h2>

<p><img src="https://i.imgur.com/NittvpN.png" alt="저장소 만들기1" /></p>

<p><img src="https://i.imgur.com/rBMi1Nk.png" alt="저장소 만들기" />
🔥주의!</p>

<p>저장소명은 url 주소에서 마지막 부분에 들어갑니다.</p>

<p>신중히 정해주세요.</p>

<p><img src="https://i.imgur.com/bOdGAGo.png" alt="blog" /></p>

<p>이와 비슷한 화면이 나온다면 성공입니다.</p>

<h2 id="배포하기-전-commit하기원고-완성시키기">배포하기 전 commit하기(원고 완성시키기)</h2>

<h3 id="commit하기전-빌드하기html파일로-변환시키는-작업">commit하기전 빌드하기(html파일로 변환시키는 작업)</h3>

<p>최상위 폴더에서 <code class="highlighter-rouge">jekyll build</code> 명령어나 <code class="highlighter-rouge">jekyll serve</code>를 입력 해주세요.</p>

<p><code class="highlighter-rouge">jekyll serve</code> 명령어는 실행 후 실행창을 꺼야 합니다.</p>

<p>빌드가 잘 되셨으면 _site 폴더에 서버를 실행시키기 위한 모든 파일이 생겼습니다.</p>

<h3 id="commit하기">commit하기</h3>

<p><code class="highlighter-rouge">_site 폴더</code>에 들어가서 다음명령어들을 차례대로 입력해주세요.</p>

<p>🔥주의!</p>

<p>최상위 폴더가 아닌 _site폴더입니다.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git init .
git add .
git commit -m "commit"
git remote add origin [원격지 ur]
</code></pre></div></div>

<p><code class="highlighter-rouge">git init .</code></p>

<p>.git 파일을 생성하는 명령어 입니다.</p>

<p>.git 파일은 현재 폴더부터 하위에 있는 폴더들에 있는 모든 파일의 변경사항을 추적(기록)을 시작 합니다.</p>

<p><code class="highlighter-rouge">git add .</code></p>

<p>commit전 단계로 staged 단계로 넘기는 명령어 입니다.</p>

<p><code class="highlighter-rouge">git commit -m "주석"</code></p>

<p>staged에 있는걸 commit 상태로 넘기는 명령어 입니다.</p>

<p>"”안에 있는 것은 commit한 것에대한 주석(설명) 입니다.</p>

<p>주석에는 자신이 원하는대로 적으시면 됩니다.</p>

<p>쉽게 애기하면 총 두 번의 수정할 수 있는 기회가 있습니다.</p>

<p><code class="highlighter-rouge">git add .</code> 하기전 / <code class="highlighter-rouge">git commit -m "commit"</code> 하기전</p>

<ul>
  <li>
    <p>commit은 웹툰 원고를 그려서 제출해야하는데 웹툰원고를 완성시켜서 완성시킨 원고를 따로 완성시킨 원고 목록에 분류해놓은거라고 할 수 있습니다.</p>
  </li>
  <li>
    <p>add는 원고는 다 그렸지만 혹시 모르니 옆에다 두는 것 입니다.</p>
  </li>
</ul>

<p>만약 아직도 이해가 되지 않으신다면 Q&amp;A에 남겨주세요.</p>

<p>그림을 동원해서라도 더 자세히 설명해 드리겠습니다.</p>

<p><code class="highlighter-rouge">git remote add origin [원격지 url]</code></p>

<p>원격지 url을 기반으로 원격지 별칭을 origin으로 정하고 추가합니다.</p>

<h2 id="배포하기원고마감-한-것을-출하기">배포하기(원고마감 한 것을 출하기)</h2>

<p><code class="highlighter-rouge">git push origin master</code></p>

<p>원격지 주소에 _site에 있는 master(현재파일이 있는 폴더)를 업로드 합니다.</p>

<p>master라는 별칭은 git init . 할 때 자동으로 생겨 납니다.</p>

<h2 id="글을-수정하고-블로그에-다시-등록하기">글을 수정하고 블로그에 다시 등록하기</h2>

<p>글을 수정하고</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>jekyll build or jekyll serve
git add .
git commit -m "commit"
git push origin master
</code></pre></div></div>

<p>해주면 자동으로 블로그에 업데이트 됩니다.</p>

<p>이로서 자동화도구를 얻으셨습니다.</p>

            </div>
          </div>
        </div>
      </div>
      
      <div class="card" data-id="/2019/01/05/install-ruby">
        <div class="card__container card__container--closed">
          <svg
            class="card__image"
            xmlns="http://www.w3.org/2000/svg"
            xmlns:xlink="http://www.w3.org/1999/xlink"
            viewBox="0 0 1920 1200"
            preserveAspectRatio="xMidYMid slice"
          >
            <defs>
              <clipPath id="/2019/01/05/install-ruby-clip-path">
                <polygon
                  class="clip"
                  points="0,1200 0,0 1920,0 1920,1200"
                ></polygon>
              </clipPath>
            </defs>
            <image
              clip-path="url(#/2019/01/05/install-ruby-clip-path)"
              width="1920"
              height="1200"
              xlink:href="/blog/img/f.jpg"
            ></image>
          </svg>
          <div class="card__content">
            <i class="card__btn-close fa fa-times"></i>
            <div class="card__caption">
              <span class="card__title">#5 ruby 설치하기</span>
              <p class="card__subtitle">How to install Github</p>
            </div>
            <div class="card__copy">
              <div class="meta">
                <img
                  class="meta__avatar"
                  src="/blog/img/authors/athi.png"
                />
                <span class="meta__author">Athi</span>
                <span class="meta__date">2019-01-05</span>
              </div>
              <h1 id="ruby-다운로드">ruby 다운로드</h1>

<p><a href="https://rubyinstaller.org/downloads/">루비 다운로드</a></p>

<p>위 사이트에서 ruby를 다운받아주세요.</p>

<p>2.4.2 버젼 이상을 다운받아주세요,</p>

<p>(x64)는 64비트용 컴퓨터
(x86)은 32비트용 컴퓨터</p>

<p>이런것에 잘 모르겠다면 그냥 (x86)을 다운받아주면 됩니다.</p>

<p>계속 next해주면 다음같은 화면이 뜰 것인데</p>

<p><img src="https://i.imgur.com/6eJIXCp.png" alt="ruby화면" /></p>

<p>이제 3가지 설정을 해주어야 합니다.</p>

<h2 id="첫번째-설정">첫번째 설정</h2>

<p>숫자 1을 누른 뒤 enter를 눌러주세요.
<img src="https://i.imgur.com/bd5rlEw.png" alt="숫자1" /></p>

<p>다음과 같은 화면이 나올 텐데</p>

<p><img src="https://i.imgur.com/OEpopIN.png" alt="ruby설치" /></p>

<p>계속 next를 눌러주고</p>

<p><img src="https://i.imgur.com/OHgGsu0.png" alt="체크" /></p>

<p>이 체크하는 화면에서 체크를 해제해주세요,</p>

<p>저 화면이 안나온다면 그냥 넘어가면 됩니다.</p>

<p>여기까지 첫번째 설정이 끝났고 2번째 설정을 해주세요.</p>

<h2 id="두번째-설정">두번째 설정</h2>

<p>숫자 2를 누르고 enter를 누릅니다.</p>

<p><img src="https://i.imgur.com/4AcZBxw.png" alt="숫자2" /></p>

<p>다음과 같은 succeeded가 나오면 성공입니다.</p>

<p><img src="https://i.imgur.com/TPSKjfu.png" alt="성공" /></p>

<h2 id="세번째-설정">세번째 설정</h2>

<p>숫자 3을 누르고 enter를 누르세요,</p>

<p><img src="https://i.imgur.com/HNoM0TB.png" alt="숫자3" /></p>

<p>다음과 같은 succeeded가 나오면 성공입니다.</p>

<p><img src="https://i.imgur.com/dQJ6m5i.png" alt="성공2" /></p>

<h1 id="ruby가-잘-설치-되었는지-확인해보자">ruby가 잘 설치 되었는지 확인해보자</h1>

<p>다음 명령어가 잘 실행된다면 잘 설치 되었습니다.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ruby <span class="nt">-v</span>
gem <span class="nt">-v</span>
</code></pre></div></div>

<p><img src="https://i.imgur.com/HhKm4gO.png" alt="ruby설치확인" /></p>

<p>그리고 다음명령어를 사용해주세요.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gem <span class="nb">install </span>jekyll bundler
</code></pre></div></div>

<p>jekyll 명령어를 사용하기 위해 다음 명령어로 jekyll bundler를 설치해주세요.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>jekyll <span class="nt">-v</span>
</code></pre></div></div>

<p><img src="https://i.imgur.com/lDoXJcS.png" alt="jekyll설치" /></p>

<p>위 명령어가 잘 실행된다면 잘 설치가 되었습니다.</p>

<p>이제 모든 설치강의는 끝났습니다.</p>

<p>다음 강의는 빠르게 시작하기 강의로, 이 강의만 끝나면 모두 개인 블로그를 개설할 수 있습니다.</p>

            </div>
          </div>
        </div>
      </div>
      
      <div class="card" data-id="/2019/01/04/install-github">
        <div class="card__container card__container--closed">
          <svg
            class="card__image"
            xmlns="http://www.w3.org/2000/svg"
            xmlns:xlink="http://www.w3.org/1999/xlink"
            viewBox="0 0 1920 1200"
            preserveAspectRatio="xMidYMid slice"
          >
            <defs>
              <clipPath id="/2019/01/04/install-github-clip-path">
                <polygon
                  class="clip"
                  points="0,1200 0,0 1920,0 1920,1200"
                ></polygon>
              </clipPath>
            </defs>
            <image
              clip-path="url(#/2019/01/04/install-github-clip-path)"
              width="1920"
              height="1200"
              xlink:href="/blog/img/e.jpg"
            ></image>
          </svg>
          <div class="card__content">
            <i class="card__btn-close fa fa-times"></i>
            <div class="card__caption">
              <span class="card__title">#4 github설치하기</span>
              <p class="card__subtitle">How to install Github</p>
            </div>
            <div class="card__copy">
              <div class="meta">
                <img
                  class="meta__avatar"
                  src="/blog/img/authors/athi.png"
                />
                <span class="meta__author">Athi</span>
                <span class="meta__date">2019-01-04</span>
              </div>
              <h1 id="github">github</h1>

<h2 id="github란">github란?</h2>

<h3 id="정의">정의</h3>

<p>깃(git)은 프로그램 등의 소스 코드 관리를 위한 분산 버전 관리 시스템입니다. 깃의 작업 폴더는 모두 기록하고 있어서 추적이 가능하고, 완전한 형태의 저장소입니다.</p>

<h3 id="쉽게말하면">쉽게말하면</h3>

<ul>
  <li>파일 관리도구</li>
  <li>파일을 변경시(삭제, 수정 등) 변경사항을 기록</li>
  <li>기록을 했으므로 원할 때마다 기록사항을 볼 수 있고 복구할 수도 있다.</li>
</ul>

<h2 id="github-bash설치하기">github bash설치하기</h2>

<ul>
  <li><a href="https://gitforwindows.org/">github다운로드</a></li>
</ul>

<p><img src="https://i.imgur.com/EE2GHhK.png" alt="다운로드2" /></p>

<p>여기서 반드시 git bash에 체크가 되있어야하고<br />
git GUI가 필요없는 사람은 체크 해제를 해줍니다.</p>

<p>나머지는 다 Next를 눌러주세요.</p>

<h2 id="vscode에서-bash설정하기">VSCode에서 bash설정하기</h2>

<p><img src="https://i.imgur.com/KnT3hqE.png" alt="bash설정" /></p>

<p><img src="https://i.imgur.com/6wLcAyh.png" alt="bash설정2" /></p>

<p>Edit in settings.json을 클릭해줍니다.</p>

<p><code class="highlighter-rouge">terminal.integrated.shell.windows</code> 부분을 다음과 같이 수정해줍니다.</p>

<p>이렇게 설정하면 VSCode Terminal에서 git bash를 사용할 수 있게 됬습니다.</p>

<p><img src="https://i.imgur.com/V2cyZqq.png" alt="bash설정3" /></p>

<p>VSCode Terminal을 보는 방법은 <code class="highlighter-rouge">Ctrl + `</code> 입니다.</p>

<p><img src="https://i.loli.net/2019/06/30/5d18087580d3261364.png" alt="bash창" /></p>

<p>설정이 잘 되었으면 다음과 같은 창을 볼 수 있습니다.</p>

<h2 id="github-로그인하기">github 로그인하기</h2>

<p><a href="https://github.com/">github사이트</a></p>

<p>첫화면부터 가입할 수 있습니다.</p>

<p>가입을 할 때 Username을 입력하실 때 자신을 대표할만한 이름을 적어주세요.</p>

<p>나중에 인터넷 주소 맨 앞을 나타낼 것입니다.</p>

<p><img src="https://i.imgur.com/dKgn6HX.png" alt="깃가입" /></p>

<p>Unlimited public repositores for free를 선택 하세요.<br />
무료만으로도 충분히 많은 기능을 사용할 수 있습니다.
<img src="https://i.imgur.com/HDwE9lf.png" alt="프리" /></p>

<p>마지막으로 자기에 해당사항을 체크하고 가입 합니다.<br />
그러면 이메일에 확인 메일이 와있을 겁니다.</p>

<p><img src="https://i.imgur.com/j5R9TGE.png" alt="step3" /></p>

<h2 id="git-clone으로-데이터-가져오기">git clone으로 데이터 가져오기</h2>

<p>시작버튼 -&gt; git bash검색 -&gt; git bash프로그램</p>

<p><img src="https://i.imgur.com/vmiDTQ3.png" alt="git bash" /></p>

<p><code class="highlighter-rouge">pwd</code> 입력시 현재 폴더 위치를 알 수 있습니다.
<img src="https://i.imgur.com/7eQsYRz.png" alt="pwd" /></p>

<p>ex) <code class="highlighter-rouge">/c/User/blabla~~</code></p>

<p>/c/는 c드라이브를 가르키고<br />
User는 c드라이브 밑에있는 User폴더를 가르킵니다.<br />
출력결과는 자기 컴퓨터마다 다 다름니다.</p>

<p>폴더간에 이동 할 때는 <code class="highlighter-rouge">cd</code> 명령어를 써주시면 됩니다.
ex) <code class="highlighter-rouge">cd [이동할경로]</code></p>

<p>폴더간에 이동을 하면서 어떠한 파일이 있는지 알고 싶을 때 <code class="highlighter-rouge">ls</code>명령어를 사용하면 파일과 폴더 목록을 볼 수 있습니다.
ex) <code class="highlighter-rouge">ls</code></p>

<p>이제 우리가 데이터를 받을 경로로 이동합니다.</p>

<p>나는 Documents(문서)로 가겠습니다.
<img src="https://i.imgur.com/2c7TXKA.png" alt="이동" /></p>

<p>Documents로 이동한 걸 볼 수 있습니다.
<img src="https://i.imgur.com/dCGBKXv.png" alt="이동2" /></p>

<p>그리고 <code class="highlighter-rouge">git clone [가져올 데이터 주소]</code> 명령어로 데이터를 가져올 것 입니다.</p>

<p>데이터를 가져올려면 무엇을 가져올지 알아야 합니다.
<a href="https://github.com/AthiLog/athi">github athi</a></p>

<p>여기에 접속해서 Clone or Download를 클릭 한뒤 복사 이미지를 클릭합니다.</p>

<p><img src="https://i.imgur.com/DyrbTGD.png" alt="clone" /></p>

<p>클릭을 했으면 https://github.com/AthiLog/athi.git가 복사 되었을 것 입니다.</p>

<p>다시 git bash로 돌아와서 다음 명령어를 적어 주세요.</p>

<p><code class="highlighter-rouge">git clone --branch lecture https://github.com/AthiLog/athi.git</code></p>

<p><img src="https://i.imgur.com/f1cO68W.png" alt="git 가져오기" /></p>

<p>–branch lecture 옵션을 써준 이유는 master branch(master폴더)가 아닌 lecture branch(lecture 폴더를) 가져올 것이기 때문 입니다.</p>

<p>그럼 이제 내 문서에 들어가보면 github에서 가져온 파일들이 생길 겁니다.</p>

<p>VSCode로 가져온 파일을 열어 보세요.</p>

<p><img src="https://i.imgur.com/ToGOlHI.png" alt="구성" /></p>

<p>위와 같은 파일구성으로 화면이 뜬다면 성공 입니다.</p>

<p>파일 목록창에 색깔이 왜 입혀져 있는지 궁금하신 분들이 있을 텐데 그건 나중에 알려드리겠습니다.</p>

<p>위 폴더와 파일 구성을 jekyll이라고 하는데 jekyll을 서버로 실행시킬려면 ruby 개발 환경이 필요합니다.</p>

<p>다음 강의는 마지막 설치 강의로 ruby를 설치할 겁니다.</p>

            </div>
          </div>
        </div>
      </div>
      
      <!-- /cards -->
    </div>
  </div>

  <div class="pagination">
  
  <a
    href="/blog/"
    class="previous"
    >Previous</a
  >
  
  <span class="page_number"
    >2 / 4</span
  >
  
  <a href="/blog/page/3/" class="next"
    >Next</a
  >
  
</div>


  <!-- /container -->
</div>

    <!-- JS -->
    <script src="/blog/js/vendors/trianglify.min.js"></script>
    <script src="/blog/js/modern-blog.js"></script>
    <script src="/blog/js/vendors/TweenMax.min.js"></script>
    <script src="/blog/js/vendors/ScrollToPlugin.min.js"></script>
    <script src="/blog/js/vendors/cash.min.js"></script>
    <script src="/blog/js/card-modern-blog.js"></script>
  </body>
</html>
